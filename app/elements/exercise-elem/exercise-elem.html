<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="./exercise-add.html">
<link rel="import" href="./exercise-post.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-left-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/fade-out-animation.html">


<dom-module id="exercise-elem">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block;
      }
      .button-add {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1;
      }
      neon-animated-pages {
        height: 100%;
      }
      body {
        overflow: hidden;
        @apply(--layout-fullbleed);
      }
    </style>

    <iron-ajax
      auto
      url="./mock.json"
      params='{"alt":"json", "q":"chrome"}'
      handle-as="json"
      on-response="handleResponse"
      debounce-duration="300"></iron-ajax>

    <a href="/upload">
      <paper-fab icon="add" class="button-add" on-tap="addExercisePopup"></paper-fab>
    </a>



    <section>
      <exercise-post exercises={{exercises}}><exercise-post>
    </section>

    <!-- END ELEMENT -->
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'exercise-elem',

        properties: {
          greeting: {
            type: String,
            value: 'Exercise!',
            notify: true
          },
          exercises: {
            type: Array,
            notify: true
          }
        },

        handleResponse: function(e, r) {
          var response = r.response;
          console.log(response);
          this.exercises = response;
        },

        addExercisePopup: function() {
          console.log('click add');
          var dropdown = document.getElementById('new-exercise');
          // var pages = document.getElementById('pages');

          if (dropdown) {
            dropdown.show();
          }
          this.$.pages.selected = 1;
        }
      });
    })();
  </script>

</dom-module>
